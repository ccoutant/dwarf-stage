<html><head>
  <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
  <title>DWARF Issue</title>
</head><body>
<body>
<table style="text-align: left; width: 800px; height: 136px;" border="0">
  <tbody>
    <tr>
      <td
 style="vertical-align: middle; text-align: center; width: 153px;"><img
 src="dwarf.png" border="0"> </td>
      <td style="width: 372px;">
      <div style="text-align: center;"> </div>
      <h1 style="text-align: center;">DWARF Standard</h1>
      <div style="text-align: center;"> </div>
      </td>
    </tr>
  </tbody>
</table>
<table style="text-align: left; width: 800px; height: 26px;" border="0"
 cellpadding="0" cellspacing="0">
  <tbody>
    <tr>
      <td style="width: 168px; background-color: rgb(51, 51, 255);"><br>
      </td>
      <td
 style="text-align: center; background-color: rgb(51, 51, 255);"><a
 style="color: rgb(255, 255, 255);"
 href="/">HOME</a><br>
      </td>
      <td
 style="text-align: center; background-color: rgb(51, 51, 255);"><a
 style="color: rgb(255, 255, 255);"
 href="/Download.html">SPECIFICATIONS</a><br>
      </td>
      <td
 style="text-align: center; background-color: rgb(51, 51, 255);"><a
 style="color: rgb(255, 255, 255);"
 href="http://wiki.dwarfstd.dev/index.php?title=DWARF_FAQ">FAQ</a><br>
      </td>
      <td
 style="text-align: center; background-color: rgb(51, 51, 255);"><a
 style="color: rgb(255, 255, 255);"
 href="/issues.html">ISSUES</a><br>
      </td>
      <td style="width: 168px; background-color: rgb(51, 51, 255);"><br>
      </td>
    </tr>
  </tbody>
</table>
<br>
<br>

<table style="text-align: left; width: 794px; height: 25px;" border="1" cellpadding="2" cellspacing="2">
  <tbody>

    <tr>
      <td>170427.2</td>
      <td>Alexandre Oliva</td>
      <td>Extending loclists</td>
      <td>Enhancement</td>
      <td>Accepted</td>
      <td>Ron Brender</td>
    </tr>
  </tbody>
</table>
<pre><big>

The original proposal sought to add some new kinds of location
list entries (LLEs). To deal with upward compatibility issues it
proposed:

  In Section 2.6.2, page 44, add to 1. DW_LLE_end_of_list:

    Any non-standard entry kind may be interpreted as a
    DW_LLE_end_of_list entry.

This approach has numerous issues:

  . It is not consistent with the vendor-defined extensions model
    used elsewhere in DWARF.
  . It will interfere with potential DWARF extensions because user
    extension kind codes are not segregated.
  . It actually doesn't work--from a consumer perspective, any
    unknown code is a show stopper, whether &quot;authorized&quot; or not.
There is no reasonable way to skip over the unknown entry and
resume following.

This replacement proposal defines a vendor-specific extension range
for LLEs. Further, because range lists and locations lists are
strongly similar in structure and organization, a similar extension
range is defined for them as well.

TEXT CHANGES

1) In Section 7.1, p 183, lines 13-14, add &quot;DW_LLE&quot; and &quot;DW_RLE&quot;
in  the (alphabetical) list of prefixes that have vendor-defined
extension ranges.

2) In Section 7.7.3, p226, Table 7.10, add

    DW_LLE_lo_user    0xc0
    DW_LLE_hi_user    0xff


3) In Section 7.25, p240, Table 7.30, add

    DW_RLE_lo_user    0xc0
    DW_RLE_hi_user    0xff

A limitation of the above is that it does not address
how to assure that a vendor extension can be skipped if not known to a
consumer. The simplest strategy appears to be
to require that the beginning of an extended function be a ULEB length
of any operands (whether zero or more) that follow. The following
text changes (in addition to the changes above) express this:

4) In Section 7.7.3, following Table 7.10, insert the following:

    &quot;If a vendor defines a vendor-specific kind of location list
entry, the kind code must be immediately followed by an
unsigned LEB128 value that specifies the length of all
remaining bytes (not including either the kind or the length
itself) for that entry.&quot;

5) In Section 7.25, following Table 7.30, insert the following:

    &quot;If a vendor defines a vendor-specific kind of range list
entry, the kind code must be immediately followed by an
unsigned LEB128 value that specifies the length of all
remaining bytes (not including either the kind or the length
itself) for that entry.&quot;


NOTE: By editorial convention, all four entries will be marked with
double-dagger symbols indicating they are &quot;New in DWARF Version 5&quot;.

--
2021-04-15:  Revised and split into two proposals.  See 170427.3.
   Previous version: http://dwarfstd.dev/issues/170427.2-1.html
2021-04-27:  Added items (4) and (5).
2021-05-17:  Accepted.
</big></pre>
<br><br>

<table style="text-align: left; width: 800px;" border="0" cellpadding="0" cellspacing="0">
  <small>
  </small><tbody><small>
    </small><tr><small>
      </small><td style="width: 800px; text-align: center;"><small>
      <font class="footmsg">
All logos and trademarks in this site are property of their respective
owner. <br>
The comments are property of their posters, all the rest &copy; 2007-2022
by DWARF Standards Committee.</font></small></td><small>
    </small></tr><small>
  </small></tbody><small>
  </small>
</table>

</body></html>

<html><head>
  <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
  <title>DWARF Issue</title>
</head><body>
<body>
<table style="text-align: left; width: 800px; height: 136px;" border="0">
  <tbody>
    <tr>
      <td
 style="vertical-align: middle; text-align: center; width: 153px;"><img
 src="dwarf.png" border="0"> </td>
      <td style="width: 372px;">
      <div style="text-align: center;"> </div>
      <h1 style="text-align: center;">DWARF Standard</h1>
      <div style="text-align: center;"> </div>
      </td>
    </tr>
  </tbody>
</table>
<table style="text-align: left; width: 800px; height: 26px;" border="0"
 cellpadding="0" cellspacing="0">
  <tbody>
    <tr>
      <td style="width: 168px; background-color: rgb(51, 51, 255);"><br>
      </td>
      <td
 style="text-align: center; background-color: rgb(51, 51, 255);"><a
 style="color: rgb(255, 255, 255);"
 href="/">HOME</a><br>
      </td>
      <td
 style="text-align: center; background-color: rgb(51, 51, 255);"><a
 style="color: rgb(255, 255, 255);"
 href="/Download.html">SPECIFICATIONS</a><br>
      </td>
      <td
 style="text-align: center; background-color: rgb(51, 51, 255);"><a
 style="color: rgb(255, 255, 255);"
 href="http://wiki.dwarfstd.dev/index.php?title=DWARF_FAQ">FAQ</a><br>
      </td>
      <td
 style="text-align: center; background-color: rgb(51, 51, 255);"><a
 style="color: rgb(255, 255, 255);"
 href="/issues.html">ISSUES</a><br>
      </td>
      <td style="width: 168px; background-color: rgb(51, 51, 255);"><br>
      </td>
    </tr>
  </tbody>
</table>
<br>
<br>

<table style="text-align: left; width: 794px; height: 25px;" border="1" cellpadding="2" cellspacing="2">
  <tbody>

    <tr>
      <td>161031.2</td>
      <td>Jakub Jelinek</td>
      <td>Remove useless padding from unit headers</td>
      <td>Improvement</td>
      <td>Accepted</td>
      <td>Jakub Jelinek</td>
    </tr>
  </tbody>
</table>
<pre><big>

Section 7.5.1, pg 199
In 7.5.1 we have
&quot;All unit headers in a compilation have the same size. Some header types 
include padding bytes to achieve this.&quot;  and then padding1 and/or padding2 
fields in various unit headers.

As we have unit_type field, I don't see any point in requiring all the unit 
headers be the same size and wasting thus a lot of space (especially for 
partial units which are usually very small and extra 12 bytes mean a lot - 
for dwarf size reduction it will be often boundary between when it is 
desirable to create the partial unit or not at all.

I think it is fine if the unit header size and fields depend on the version 
field and unit_type fields.  The question is if we add any padding for 
DW_UT_lo_user..DW_UT_hi_user - if it makes any sense for consumers which 
have no idea what is such a unit good for to be able to find the DIEs in 
it, or not.

Also, in 7.5.1.1 (3.) we say that the unit_type field is new in DWARF 
Version 5, but don't have similar comment for (4.) and (5.) - those two 
fields aren't new, but swapped order in DWARF Version 5, and the padding
1/2 fields (though see above, I'd like them to go).

Another question is in 7.5.1.2, we say that (3.) is new in DWARF Version 5,
but in reality the whole skeleton unit header is new in DWARF Version 5 
(together with the split DWARF support); or we should also note that (4.) 
and (5.) were swapped and the dwo_id field is new.

--

Accepted 1/3/2017.

The first three fields in unit headers are all identical.  No additional 
padding is used.  Each different unit type may add fields after the three
common fields. 
</big></pre>
<br><br>

<table style="text-align: left; width: 800px;" border="0" cellpadding="0" cellspacing="0">
  <small>
  </small><tbody><small>
    </small><tr><small>
      </small><td style="width: 800px; text-align: center;"><small>
      <font class="footmsg">
All logos and trademarks in this site are property of their respective
owner. <br>
The comments are property of their posters, all the rest &copy; 2007-2022
by DWARF Standards Committee.</font></small></td><small>
    </small></tr><small>
  </small></tbody><small>
  </small>
</table>

</body></html>

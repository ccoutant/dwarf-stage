<html><head>
  <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
  <title>DWARF Issue</title>
</head><body>
<body>
<table style="text-align: left; width: 800px; height: 136px;" border="0">
  <tbody>
    <tr>
      <td
 style="vertical-align: middle; text-align: center; width: 153px;"><img
 src="dwarf.png" border="0"> </td>
      <td style="width: 372px;">
      <div style="text-align: center;"> </div>
      <h1 style="text-align: center;">DWARF Standard</h1>
      <div style="text-align: center;"> </div>
      </td>
    </tr>
  </tbody>
</table>
<table style="text-align: left; width: 800px; height: 26px;" border="0"
 cellpadding="0" cellspacing="0">
  <tbody>
    <tr>
      <td style="width: 168px; background-color: rgb(51, 51, 255);"><br>
      </td>
      <td
 style="text-align: center; background-color: rgb(51, 51, 255);"><a
 style="color: rgb(255, 255, 255);"
 href="/">HOME</a><br>
      </td>
      <td
 style="text-align: center; background-color: rgb(51, 51, 255);"><a
 style="color: rgb(255, 255, 255);"
 href="/Download.html">SPECIFICATIONS</a><br>
      </td>
      <td
 style="text-align: center; background-color: rgb(51, 51, 255);"><a
 style="color: rgb(255, 255, 255);"
 href="http://wiki.dwarfstd.dev/index.php?title=DWARF_FAQ">FAQ</a><br>
      </td>
      <td
 style="text-align: center; background-color: rgb(51, 51, 255);"><a
 style="color: rgb(255, 255, 255);"
 href="/issues.html">ISSUES</a><br>
      </td>
      <td style="width: 168px; background-color: rgb(51, 51, 255);"><br>
      </td>
    </tr>
  </tbody>
</table>
<br>
<br>

<table style="text-align: left; width: 794px; height: 25px;" border="1" cellpadding="2" cellspacing="2">
  <tbody>

    <tr>
      <td>160621.1</td>
      <td>Andrew Cagney</td>
      <td>More register location description clarifications</td>
      <td>Editorial</td>
      <td>Accepted</td>
      <td></td>
    </tr>
  </tbody>
</table>
<pre><big>

Section 2.5.1.7 Special Oper, pg 34
This follows up earlier editorial changes put forward by Tommy Hoffner.

Rationale:

Based on my recollection of the discussion about &quot;register location 
descriptions&quot;, while it was a significant optimization for a common case 
this wasn't clear from the description.

2.5.1.7 Special Operations; Page 34
2. DW_OP_entry_value

Change 1:

Order the &quot;DWARF expression&quot; and &quot;register location description&quot; text
consistently; i.e., have DWARF expression first.

Old:

It has two operands: an unsigned LEB128 length, followed by a
block containing a DWARF expression or a register location description
(see Section 2.6.1.1.3 on page 36). The length operand specifies the
length in bytes of the block. If the block contains a register
location description, DW_OP_entry_value pushes the value that register
had upon entering the current subprogram. If the block contains a
DWARF expression, the DWARF expression is evaluated as if it has been
evaluated upon entering the current subprogram.

New:

It has two operands: an unsigned LEB128 length, followed by a
block containing a DWARF expression or a register location description
(see Section 2.6.1.1.3 on page 36). The length operand specifies the
length in bytes of the block. If the block contains a DWARF
expression, the DWARF expression is evaluated as if it has been
evaluated upon entering the current subprogram. If the block contains
a register location description, DW_OP_entry_value pushes the value
that register had upon entering the current subprogram.

Change 2:

Append the following, which hopefully provides a rationale for &quot;register 
location description&quot;, to the non-normative text that follows the above 
(See top of page 35).

New:

The register location description provides a more compact form for the
case where the value was in a register on entry to the subprogram.


Change 3.

D.1.3 DWARF Location Description Examples; Page 283

Re-order / add to the DW_OP_entry_value examples so that, where applicable,
show the &quot;DWARF expression&quot; form, and then follow that with the more compact 
&quot;register location description&quot; form as follows:

Before &quot;DW_OP_entry_value 1 DW_OP_reg1&quot; insert the new example:

DW_OP_entry_value 2 DW_OP_breg1 0
  The value register 1 contained upon entering the current subprogram is
  pushed on the stack.


Reword example &quot;DW_OP_entry_value 1 DW_OP_reg1&quot; to refer to the above, i.e.

Old:

DW_OP_entry_value 1 DW_OP_reg1
  The value register 1 contained upon entering the current subprogram is 
  pushed on the stack.

New:

DW_OP_entry_value 1 DW_OP_reg1
  Same as the previous example (push the value register 1 contained upon 
  entering the current subprogram) but use the more compact register 
  location description.


Reorder / Change the next two examples in the same way. i.e,:

Old:

DW_OP_entry_value 1 DW_OP_reg1 DW_OP_stack_value
  The value register 1 contained upon entering the current subprogram is 
  pushed on the stack. This value is the &ldquo;contents&rdquo; of an otherwise anonymous 
  location.

DW_OP_entry_value 2 DW_OP_breg1 0 DW_OP_stack_value
  The value register 1 contained upon entering the current subprogram (same 
  as the previous example) is pushed on the stack. This value is the &ldquo;contents&rdquo; 
  of an otherwise anonymous location. This and the previous location description 
  are equivalent; the previous one is shorter, however.

New:

DW_OP_entry_value 2 DW_OP_breg1 0 DW_OP_stack_value
  The value register 1 contained upon entering the current subprogram is 
  pushed on the stack. This value is the &ldquo;contents&rdquo; of an otherwise anonymous 
  location.

DW_OP_entry_value 1 DW_OP_reg1 DW_OP_stack_value
  Same as the previous example (use the value register 1 contained upon 
  entering the current subprogram as the &quot;contents&quot;) but use the more compact
  register location description.


--
12/06/2016 -- Accepted.
</big></pre>
<br><br>

<table style="text-align: left; width: 800px;" border="0" cellpadding="0" cellspacing="0">
  <small>
  </small><tbody><small>
    </small><tr><small>
      </small><td style="width: 800px; text-align: center;"><small>
      <font class="footmsg">
All logos and trademarks in this site are property of their respective
owner. <br>
The comments are property of their posters, all the rest &copy; 2007-2022
by DWARF Standards Committee.</font></small></td><small>
    </small></tr><small>
  </small></tbody><small>
  </small>
</table>

</body></html>

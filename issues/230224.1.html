<html><head>
  <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
  <title>DWARF Issue</title>
</head><body>
<body>
<table style="text-align: left; width: 800px; height: 136px;" border="0">
  <tbody>
    <tr>
      <td
 style="vertical-align: middle; text-align: center; width: 153px;"><img
 src="dwarf.png" border="0"> </td>
      <td style="width: 372px;">
      <div style="text-align: center;"> </div>
      <h1 style="text-align: center;">DWARF Standard</h1>
      <div style="text-align: center;"> </div>
      </td>
    </tr>
  </tbody>
</table>
<table style="text-align: left; width: 800px; height: 26px;" border="0"
 cellpadding="0" cellspacing="0">
  <tbody>
    <tr>
      <td style="width: 168px; background-color: rgb(51, 51, 255);"><br>
      </td>
      <td
 style="text-align: center; background-color: rgb(51, 51, 255);"><a
 style="color: rgb(255, 255, 255);"
 href="/">HOME</a><br>
      </td>
      <td
 style="text-align: center; background-color: rgb(51, 51, 255);"><a
 style="color: rgb(255, 255, 255);"
 href="/Download.html">SPECIFICATIONS</a><br>
      </td>
      <td
 style="text-align: center; background-color: rgb(51, 51, 255);"><a
 style="color: rgb(255, 255, 255);"
 href="http://wiki.dwarfstd.dev/index.php?title=DWARF_FAQ">FAQ</a><br>
      </td>
      <td
 style="text-align: center; background-color: rgb(51, 51, 255);"><a
 style="color: rgb(255, 255, 255);"
 href="/issues.html">ISSUES</a><br>
      </td>
      <td style="width: 168px; background-color: rgb(51, 51, 255);"><br>
      </td>
    </tr>
  </tbody>
</table>
<br>
<br>

<table style="text-align: left; width: 794px; height: 25px;" border="1" cellpadding="2" cellspacing="2">
  <tbody>

    <tr>
      <td>230224.1</td>
      <td>David Blaikie</td>
      <td>Include enumerators from non-enum-class enumerations in debug_names</td>
      <td>Improvement</td>
      <td>Open</td>
      <td></td>
    </tr>
  </tbody>
</table>
<pre><big>

Section 6.1.1.1, pg 137
(should probably consider this issue alongside 230206.1 - they're 
both adding things to the index for similar reasons)

Proposal 
========

Add DW_AT_enumerator entries to name index for accelerated lookup.

Background
==========

C and C++ support the ability to create unscoped enumerations.

Example &mdash; C unscoped enumeration.

enum X {
  Y
};         
int main() { return Y; }

DW_TAG_enumeration_type
  DW_AT_type      (0x00000030 &quot;unsigned int&quot;)
  DW_AT_name      (&quot;X&quot;)
  DW_AT_byte_size (0x04)
  DW_AT_decl_file (&quot;/usr/local/google/home/blaikie/dev/scratch/test.c&quot;)
  DW_AT_decl_line (1)

  DW_TAG_enumerator
    DW_AT_name    (&quot;Y&quot;)
    DW_AT_const_value     (0)
        
                                       
Even though &quot;X&quot; is in the index, &quot;Y&quot; can be used without qualification &amp;
so a consumer would benefit from &quot;Y&quot; being in the index to avoid having
to scan through all the debug info to find it.

C++ also supports scoped enumerations, via the &quot;enum class&quot; syntax, in
which case they need to be qualified, like &quot;X::Y&quot; and so there would be
less need/benefit to including these enumerators in the index as they can
be found via their scope (like class members are expected to be as well).

This proposal extends the list of tags that may be put into the name 
index further to include DW_TAG_enumerator for unscoped enumerations
to simplify the work consumers have to do to find namespace alias DIEs
by name.

Document changes
================

6.1.1.1 Contents of the Name Index
&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;

[ORIGINAL TEXT]
The name index must contain an entry for each debugging information entry that 
defines a named subprogram, label, variable, type, or namespace, subject to the 
following rules: 

[NEW TEXT]
==========
The name index must contain an entry for each debugging information entry that 
defines a named subprogram, label, variable, type, namespace, or enumerator in
a non-enum-class enumeration subject to the following rules: 


</big></pre>
<br><br>

<table style="text-align: left; width: 800px;" border="0" cellpadding="0" cellspacing="0">
  <small>
  </small><tbody><small>
    </small><tr><small>
      </small><td style="width: 800px; text-align: center;"><small>
      <font class="footmsg">
All logos and trademarks in this site are property of their respective
owner. <br>
The comments are property of their posters, all the rest &copy; 2007-2022
by DWARF Standards Committee.</font></small></td><small>
    </small></tr><small>
  </small></tbody><small>
  </small>
</table>

</body></html>

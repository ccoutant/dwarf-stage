<html><head>
  <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
  <title>DWARF Issue</title>
</head><body>
<body>
<table style="text-align: left; width: 800px; height: 136px;" border="0">
  <tbody>
    <tr>
      <td
 style="vertical-align: middle; text-align: center; width: 153px;"><img
 src="dwarf.png" border="0"> </td>
      <td style="width: 372px;">
      <div style="text-align: center;"> </div>
      <h1 style="text-align: center;">DWARF Standard</h1>
      <div style="text-align: center;"> </div>
      </td>
    </tr>
  </tbody>
</table>
<table style="text-align: left; width: 800px; height: 26px;" border="0"
 cellpadding="0" cellspacing="0">
  <tbody>
    <tr>
      <td style="width: 168px; background-color: rgb(51, 51, 255);"><br>
      </td>
      <td
 style="text-align: center; background-color: rgb(51, 51, 255);"><a
 style="color: rgb(255, 255, 255);"
 href="/">HOME</a><br>
      </td>
      <td
 style="text-align: center; background-color: rgb(51, 51, 255);"><a
 style="color: rgb(255, 255, 255);"
 href="/Download.html">SPECIFICATIONS</a><br>
      </td>
      <td
 style="text-align: center; background-color: rgb(51, 51, 255);"><a
 style="color: rgb(255, 255, 255);"
 href="http://wiki.dwarfstd.dev/index.php?title=DWARF_FAQ">FAQ</a><br>
      </td>
      <td
 style="text-align: center; background-color: rgb(51, 51, 255);"><a
 style="color: rgb(255, 255, 255);"
 href="/issues.html">ISSUES</a><br>
      </td>
      <td style="width: 168px; background-color: rgb(51, 51, 255);"><br>
      </td>
    </tr>
  </tbody>
</table>
<br>
<br>

<table style="text-align: left; width: 794px; height: 25px;" border="1" cellpadding="2" cellspacing="2">
  <tbody>

    <tr>
      <td>200716.1</td>
      <td>David Blaikie</td>
      <td>debug_macro header is missing a length prefix</td>
      <td>Enhancement</td>
      <td>Open</td>
      <td>David Blaikie</td>
    </tr>
  </tbody>
</table>
<pre><big>

Section 6.3.1, pg 166

Most DWARF section contributions now start with a length (with the usual 
DWARF32/DWARF64 encoding dance) followed by a version.

This feature makes it easy for consumers to skip over portions of the DWARF 
they do not understand - as long as the length can be read, even if the 
version is unknown (too new, for instance) the length can be used to skip 
over the contents.

debug_macro starts with a version instead of a length, which makes this 
technique not possible.

To change the format would require changing the section name (since there 
would be no way to know that a length must be read first, instead of a 
version). If it's not worth changing the section name again - perhaps in 
the next version of DWARF it could say &quot;version then length&quot; and we 
promise to never change that - then a consumer can check the version is 
&gt;= 6, and then read the length unconditionally (even if it's a version it 
doesn't otherwise recognize) and skip the contents. Not perfect, but might 
be worth doing if/when the version is reving anyway.

Proposal
=======
I don't think it's worth adding the length field to the .debug_macro
section if that's the only reason we would need to bump the
.debug_macro version number up to 6.

I'd like to set this issue aside until closer to the end of the
DWARFv6 lifecycle and only adopt it if there's been some other reason
that's motivated a version bump in the .debug_macro section.

But I'm open to other opinions... (email discussion would be great to
get some of this flushed out before an in-person meeting to speed
things along)

-- 
2021-07-09:  Revised: Add Proposal
</big></pre>
<br><br>

<table style="text-align: left; width: 800px;" border="0" cellpadding="0" cellspacing="0">
  <small>
  </small><tbody><small>
    </small><tr><small>
      </small><td style="width: 800px; text-align: center;"><small>
      <font class="footmsg">
All logos and trademarks in this site are property of their respective
owner. <br>
The comments are property of their posters, all the rest &copy; 2007-2022
by DWARF Standards Committee.</font></small></td><small>
    </small></tr><small>
  </small></tbody><small>
  </small>
</table>

</body></html>

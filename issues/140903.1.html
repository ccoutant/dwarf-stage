<html><head>
  <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
  <title>DWARF Issue</title>
</head><body>
<body>
<table style="text-align: left; width: 800px; height: 136px;" border="0">
  <tbody>
    <tr>
      <td
 style="vertical-align: middle; text-align: center; width: 153px;"><img
 src="dwarf.png" border="0"> </td>
      <td style="width: 372px;">
      <div style="text-align: center;"> </div>
      <h1 style="text-align: center;">DWARF Standard</h1>
      <div style="text-align: center;"> </div>
      </td>
    </tr>
  </tbody>
</table>
<table style="text-align: left; width: 800px; height: 26px;" border="0"
 cellpadding="0" cellspacing="0">
  <tbody>
    <tr>
      <td style="width: 168px; background-color: rgb(51, 51, 255);"><br>
      </td>
      <td
 style="text-align: center; background-color: rgb(51, 51, 255);"><a
 style="color: rgb(255, 255, 255);"
 href="/">HOME</a><br>
      </td>
      <td
 style="text-align: center; background-color: rgb(51, 51, 255);"><a
 style="color: rgb(255, 255, 255);"
 href="/Download.html">SPECIFICATIONS</a><br>
      </td>
      <td
 style="text-align: center; background-color: rgb(51, 51, 255);"><a
 style="color: rgb(255, 255, 255);"
 href="http://wiki.dwarfstd.dev/index.php?title=DWARF_FAQ">FAQ</a><br>
      </td>
      <td
 style="text-align: center; background-color: rgb(51, 51, 255);"><a
 style="color: rgb(255, 255, 255);"
 href="/issues.html">ISSUES</a><br>
      </td>
      <td style="width: 168px; background-color: rgb(51, 51, 255);"><br>
      </td>
    </tr>
  </tbody>
</table>
<br>
<br>

<table style="text-align: left; width: 794px; height: 25px;" border="1" cellpadding="2" cellspacing="2">
  <tbody>

    <tr>
      <td>140903.1</td>
      <td>Paul Robinson</td>
      <td>DW_AT_default_value without default value?</td>
      <td>Error</td>
      <td>Rejected</td>
      <td>Paul Robinson</td>
    </tr>
  </tbody>
</table>
<pre><big>

Section 4.1, pg 70
In DWARF 4, section 4.1 item 9 describes DW_AT_default_value in an odd way.  The third
and fourth sentences, plus the following non-normative text, say:
  
  If the attribute form is of class reference, the default value of the parameter is
  the value of the referenced variable (which may be constant) or the value returned
  by the referenced subroutine; a reference value of 0 means that no default value
  has been specified.  If the value is of class constant, that constant is interpreted
  as a default value of the type of the formal parameter.

  <i>For a constant form there is no way to express the absence of a default value.  </i>

Seems to me, we should express the absence of a default value by omitting the attribute,
and not with this nonsense about &quot;a reference value of 0&quot; or this cautionary note about
how a constant form cannot express the absence of a default value. Omitting the attribute
would be the absolutely normal way to express that something isn't there, so it isn't
worth any special mention.

I'm also not clear about &quot;the value returned by the referenced subroutine&quot; given that
DW_AT_default_value really can't provide enough context to allow calling an arbitrary
source-program subroutine. Perhaps this was intended to refer to a DWARF procedure?
The &quot;subroutine&quot; usage goes back to DWARF 2, so I don't have any idea about that.

Proposed replacement text, keeping the subroutine bit intact for now (and not modifying
the first two sentences of item 9):

  If the attribute form is of class reference, the default value of the parameter is
  the value of the referenced variable, or the value returned by the referenced 
  subroutine.  If the value is of class constant, that constant is interpreted
  as a default value of the type of the formal parameter.

--
10/21/2014 -- Rejected.  See replacement issue 140917.1.
</big></pre>
<br><br>

<table style="text-align: left; width: 800px;" border="0" cellpadding="0" cellspacing="0">
  <small>
  </small><tbody><small>
    </small><tr><small>
      </small><td style="width: 800px; text-align: center;"><small>
      <font class="footmsg">
All logos and trademarks in this site are property of their respective
owner. <br>
The comments are property of their posters, all the rest &copy; 2007-2022
by DWARF Standards Committee.</font></small></td><small>
    </small></tr><small>
  </small></tbody><small>
  </small>
</table>

</body></html>

<html><head>
  <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
  <title>DWARF Issue</title>
</head><body>
<body>
<table style="text-align: left; width: 800px; height: 136px;" border="0">
  <tbody>
    <tr>
      <td
 style="vertical-align: middle; text-align: center; width: 153px;"><img
 src="dwarf.png" border="0"> </td>
      <td style="width: 372px;">
      <div style="text-align: center;"> </div>
      <h1 style="text-align: center;">DWARF Standard</h1>
      <div style="text-align: center;"> </div>
      </td>
    </tr>
  </tbody>
</table>
<table style="text-align: left; width: 800px; height: 26px;" border="0"
 cellpadding="0" cellspacing="0">
  <tbody>
    <tr>
      <td style="width: 168px; background-color: rgb(51, 51, 255);"><br>
      </td>
      <td
 style="text-align: center; background-color: rgb(51, 51, 255);"><a
 style="color: rgb(255, 255, 255);"
 href="/">HOME</a><br>
      </td>
      <td
 style="text-align: center; background-color: rgb(51, 51, 255);"><a
 style="color: rgb(255, 255, 255);"
 href="/Download.html">SPECIFICATIONS</a><br>
      </td>
      <td
 style="text-align: center; background-color: rgb(51, 51, 255);"><a
 style="color: rgb(255, 255, 255);"
 href="http://wiki.dwarfstd.dev/index.php?title=DWARF_FAQ">FAQ</a><br>
      </td>
      <td
 style="text-align: center; background-color: rgb(51, 51, 255);"><a
 style="color: rgb(255, 255, 255);"
 href="/issues.html">ISSUES</a><br>
      </td>
      <td style="width: 168px; background-color: rgb(51, 51, 255);"><br>
      </td>
    </tr>
  </tbody>
</table>
<br>
<br>

<table style="text-align: left; width: 794px; height: 25px;" border="1" cellpadding="2" cellspacing="2">
  <tbody>

    <tr>
      <td>220706.1</td>
      <td>Cary Coutant</td>
      <td>Default Locations for Pieces of a Composite Location Description</td>
      <td>Enhancement</td>
      <td>Open</td>
      <td>Cary Coutant</td>
    </tr>
  </tbody>
</table>
<pre><big>

Section 2.6.1.1, pg 39
Default Locations for Pieces of a Composite Location Description

Background
----------

With the addition of default location descriptions in location lists in
DWARF 5, it is possible to provide a default location for a variable
that describes where it exists in memory for most of its lifetime,
excluding those ranges of code where it may have been promoted to a
register (for example).

For composite location descriptions, however, consider a scenario where
one piece of a variable (say, a field of a structure) is promoted to a
register in a range of code, while the remainder of that variable
remains in its default location. We have no way of describing this
scenario without repeating the default location description of each
piece that has not been promoted.

This proposal adds a simple way of indicating that a particular piece of
a composite location description should defer to the default location
description for that piece.


Proposed Changes to the DWARF Specification
-------------------------------------------

In Section 2.6.1.1 (Simple Location Descriptions), pages 39-41, add the
following:

    2.6.1.1.5 Default Location Descriptions

    A default location description represents a piece of an object whose
    location is given by the default location description in a location
    list (see Section 2.6.2). It may be used in a composite location
    description that is part of a location list entry, to describe a
    piece or pieces of an object that remain in the default location
    even when another piece or pieces have a different location for a
    particular address range. It consists of the single opcode
    DW_OP_default_location.

In Section 7.7.1 (DWARF Expressions), Table 7.9, beginning on Page 223,
add a row:

    Operation              Code       No. of Operands    Notes
    ---------              ----       ---------------    -----
    DW_OP_default_location TBA        0


</big></pre>
<br><br>

<table style="text-align: left; width: 800px;" border="0" cellpadding="0" cellspacing="0">
  <small>
  </small><tbody><small>
    </small><tr><small>
      </small><td style="width: 800px; text-align: center;"><small>
      <font class="footmsg">
All logos and trademarks in this site are property of their respective
owner. <br>
The comments are property of their posters, all the rest &copy; 2007-2022
by DWARF Standards Committee.</font></small></td><small>
    </small></tr><small>
  </small></tbody><small>
  </small>
</table>

</body></html>

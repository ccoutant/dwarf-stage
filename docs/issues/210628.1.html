<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DWARF Issue: Clarification of relative paths in DW_AT_comp_dir</title>
  <link rel="stylesheet" href="../static/dwarf.css" type="text/css" />
  <link rel="icon" type="image/png" sizes="48x48" href="../images/favicon.png" />
</head>
<body>
  <div class="pageheader">
    <img id="dwarf-logo" alt="DWARF Debugging Format" src="../images/dwarf-logo.svg" />
  </div>

  <div class="contentwrapper">
    <div class="content">

      <h1>Issue 210628.1: Clarification of relative paths in DW_AT_comp_dir</h1>

      <table class="issueheader">
        <tbody>
          <tr>
            <th>Author:</th>
            <td>Caroline Tice</td>
          </tr>
          <tr>
            <th>Champion:</th>
            <td>Caroline Tice</td>
          </tr>
          <tr>
            <th>Date submitted:</th>
            <td>2021-06-28</td>
          </tr>
          <tr>
            <th>Type:</th>
            <td>Clarification</td>
          </tr>
          <tr>
            <th>Status:</th>
            <td>Accepted with modifications</td>
          </tr>
          <tr>
            <th>DWARF Version:</th>
            <td>6</td>
          </tr>
    
        </tbody>
      </table>

<pre class="proposal">
Section 3.1.1, pg 64

Current text (Section 3.1.1, pg 64):
----------------------------------------------
6. A DW_AT_comp_dir attribute whose value is a null-terminated string
containing the current working directory of the compilation command
that produced this compilation unit in whatever form makes sense for
the host system.


Proposal (allow relative paths, with clarification):
------------------------------------------------------------------
Add the following normative text after the current text:

&quot;If a relative path is used in DW_AT_comp_dir, it will be relative 
to the location of the linked image containing the DW_AT_comp_dir entry.&quot;

Add the following non-normative text after the preceding text:

*In some cases a producer may allow the user to specify a relative
path for DW_AT_comp_dir. There are a few cases in which this is useful,
but in general using a relative path for DW_AT_comp_dir is discouraged
as it will not work well in many cases including the following:
different relative paths are used within the same build; the build
system creates multiple linked images in different directories; the
final linked image is moved before being debugged; .o files need to
be debugged directly.*

Updates to Section 6.2.4, pg 157
--------------------------------------------

Add the following normative text after the end of the first paragraph
at the top of page 157:

&quot;If the current directory itself is specified as a relative path, it is
relative to the location of the linked image containing the line table
entries (assuming the image has not been moved).&quot;

-- 
2021-07-21: Revised: Added alternate proposal.
   Previous version: http://dwarfstd.org/issues/210628.1-1.html
2021-07-28: Revised: Remove proposal 1, add changes to 6.2.4 line table.
   Previous version: http://dwarfstd.org/issues/210628.1-2.html
2021-08-08: Clarified text added in Section 6.2.4.
2021-08-09: Accepted with modifications: remove parenthetical text in Sec. 6.2.4.
</pre>

    </div> <!-- content -->
  </div> <!-- contentwrapper -->

  <div class="nav">
<ul>
	<li><a href="../index.html">Home</a></li>
	<li>DWARF Standards
	<ul>
		<li><a href="../download.html">Download</a></li>
		<li><a href="../languages.html">Current Language Codes</a></li>
	</ul>
	</li>
	<li>Public Comment
	<ul>
		<li><a href="../comment.html">Submit a Comment</a></li>
		<li><a href="../submissions.html">Submission Guidelines</a></li>
		<li><a href="../issues.html">Issues</a></li>
	</ul>
	</li>
	<li>About the Committee
	<ul>
		<li><a href="../members.html">Members</a></li>
		<li><a href="../bylaws.html">Bylaws</a></li>
		<li><a href="../code-of-conduct.html">Code of Conduct</a></li>
		<li><a href="../member-agreement.html">Membership Agreement</a></li>
		<li><a href="../procedures.html">Committee Procedures</a></li>
	</ul>
	</li>
</ul>

  </div> <!-- nav -->

  <div class="clearer"></div>

  <div class="pagefooter">
<p>dwarfstd.org is supported by <a href="https://sourceware.org/">Sourceware</a>.
Contributions are welcome.</p>
<p>Copyright &copy; 2023 DWARF Debugging Information Format Committee</p>
<p><a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a><br />
This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</p>

  </div> <!-- footer -->
</body>
</html>
